<div class="outer">
  <div class="container">
    <div class="row">
      <div class="col-md-5">
      <%= render "shared/list_area", lists: App.top_listed.limit(30), title: "Top 30" %>
      </div>
      <div class="col-md-7">
        <div class="qr-area">
          <table class='qr-table'>
            <% @qr.modules.each_index do |x| -%>
              <tr>
                <% @qr.modules.each_index do |y| -%>
                  <% if @qr.dark?(x,y) -%>
                    <td class="black"/>
                  <% else -%>
                    <td class="white"/>
                  <% end -%>
                <% end -%>
              </tr>
            <% end -%>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">
var timer = setInterval(function(){
  $.get("<%= @check_url %>", function(data){
    if(data.success){
      clearInterval(timer);
      Turbolinks.visit(data.path);
    }
  });
}, 1000);
</script>

